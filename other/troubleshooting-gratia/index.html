
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://opensciencegrid.org/docs/other/troubleshooting-gratia/">
      
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.4">
    
    
      
        <title>Troubleshooting Gratia - OSG Site Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.358818c7.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f0267088.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-69012-29","opensciencegrid.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#troubleshooting-gratia-accounting" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://opensciencegrid.org/docs/" title="OSG Site Documentation" class="md-header-nav__button md-logo" aria-label="OSG Site Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            OSG Site Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Troubleshooting Gratia
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://opensciencegrid.org/docs/" title="OSG Site Documentation" class="md-nav__button md-logo" aria-label="OSG Site Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    OSG Site Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/opensciencegrid/docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../detailed-overview/" class="md-nav__link">
      Detailed Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-planning/" class="md-nav__link">
      Site Planning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-verification/" class="md-nav__link">
      Site Verification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-responsibilities/" class="md-nav__link">
      Site Responsibilities
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Resource Sharing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Resource Sharing" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Resource Sharing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../resource-sharing/overview/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../resource-sharing/os-backfill-containers/" class="md-nav__link">
      Site Backfill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../resource-sharing/user-containers/" class="md-nav__link">
      User Allocations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Compute Entrypoint
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Compute Entrypoint" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Compute Entrypoint
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/htcondor-ce-overview/" class="md-nav__link">
      HTCondor-CE Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/hosted-ce/" class="md-nav__link">
      Request a Hosted CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/install-htcondor-ce/" class="md-nav__link">
      Install HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/job-router-recipes/" class="md-nav__link">
      Job Router Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/troubleshoot-htcondor-ce/" class="md-nav__link">
      Troubleshooting HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/submit-htcondor-ce/" class="md-nav__link">
      Submitting to HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/covid-19/" class="md-nav__link">
      Supporting COVID-19 Research
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Worker Node
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Worker Node" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Worker Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn/" class="md-nav__link">
      Install from RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-tarball/" class="md-nav__link">
      Install from Tarball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-oasis/" class="md-nav__link">
      Install from OASIS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-cvmfs/" class="md-nav__link">
      Install CVMFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-singularity/" class="md-nav__link">
      Install Singularity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn-containers/" class="md-nav__link">
      Using WN Containers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Data
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Data" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-1" type="checkbox" id="nav-9-1">
    
    <label class="md-nav__link" for="nav-9-1">
      HTTP & OASIS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="HTTP & OASIS" data-md-level="2">
      <label class="md-nav__title" for="nav-9-1">
        <span class="md-nav__icon md-icon"></span>
        HTTP & OASIS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/frontier-squid/" class="md-nav__link">
      Install Squid HTTP Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/update-oasis/" class="md-nav__link">
      Update OASIS Shared Repo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/external-oasis-repos/" class="md-nav__link">
      Install an OASIS Repo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      POSIX Storage
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="POSIX Storage" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        <span class="md-nav__icon md-icon"></span>
        POSIX Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/gridftp/" class="md-nav__link">
      Install GridFTP Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/load-balanced-gridftp/" class="md-nav__link">
      Install Load Balanced GridFTP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-3" type="checkbox" id="nav-9-3">
    
    <label class="md-nav__link" for="nav-9-3">
      XRootD
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="XRootD" data-md-level="2">
      <label class="md-nav__title" for="nav-9-3">
        <span class="md-nav__icon md-icon"></span>
        XRootD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd/overview/" class="md-nav__link">
      XRootD Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd/install-standalone/" class="md-nav__link">
      Install XRootD Standalone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd/install-storage-element/" class="md-nav__link">
      Install XRootD SE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd/xrootd-authorization/" class="md-nav__link">
      Configure Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd/install-client/" class="md-nav__link">
      Using XRootD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd/install-cms-xcache/" class="md-nav__link">
      Install CMS XCache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-4" type="checkbox" id="nav-9-4">
    
    <label class="md-nav__link" for="nav-9-4">
      StashCache
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="StashCache" data-md-level="2">
      <label class="md-nav__title" for="nav-9-4">
        <span class="md-nav__icon md-icon"></span>
        StashCache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/overview/" class="md-nav__link">
      StashCache Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/run-stashcache-container/" class="md-nav__link">
      Running a Cache in a container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/run-stash-origin-container/" class="md-nav__link">
      Running an Origin in a container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/install-cache/" class="md-nav__link">
      Install a Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/install-origin/" class="md-nav__link">
      Install an Origin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/vo-data/" class="md-nav__link">
      Getting VO data into StashCache
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-5" type="checkbox" id="nav-9-5">
    
    <label class="md-nav__link" for="nav-9-5">
      HDFS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="HDFS" data-md-level="2">
      <label class="md-nav__title" for="nav-9-5">
        <span class="md-nav__icon md-icon"></span>
        HDFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/hadoop-overview/" class="md-nav__link">
      HDFS Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-hadoop/" class="md-nav__link">
      Install HDFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Submit
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Submit" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        Submit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10-1" type="checkbox" id="nav-10-1">
    
    <label class="md-nav__link" for="nav-10-1">
      Flocking
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Flocking" data-md-level="2">
      <label class="md-nav__title" for="nav-10-1">
        <span class="md-nav__icon md-icon"></span>
        Flocking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../submit/osg-flock/" class="md-nav__link">
      Flock to OSG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Security
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Security" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/lcmaps-voms-authentication/" class="md-nav__link">
      LCMAPS VOMS authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/user-certs/" class="md-nav__link">
      User Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/certificate-management/" class="md-nav__link">
      Certificate Management Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11-4" type="checkbox" id="nav-11-4">
    
    <label class="md-nav__link" for="nav-11-4">
      Host Certificates
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Host Certificates" data-md-level="2">
      <label class="md-nav__title" for="nav-11-4">
        <span class="md-nav__icon md-icon"></span>
        Host Certificates
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/overview/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/incommon/" class="md-nav__link">
      Using InCommon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/lets-encrypt/" class="md-nav__link">
      Using Let's Encrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/digicert/" class="md-nav__link">
      Using DigiCert
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Common
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Common" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/ca/" class="md-nav__link">
      CA Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/yum/" class="md-nav__link">
      OSG Yum Repos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration-with-osg-configure/" class="md-nav__link">
      Configuration with OSG-Configure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/registration/" class="md-nav__link">
      Registration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13" checked>
    
    <label class="md-nav__link" for="nav-13">
      Other
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Other" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        <span class="md-nav__icon md-icon"></span>
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-gwms-frontend/" class="md-nav__link">
      Install GlideinWMS Frontend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-cvmfs-stratum1/" class="md-nav__link">
      Install a CVMFS Stratum 1
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Troubleshooting Gratia
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Troubleshooting Gratia
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gratiagracc-the-big-picture" class="md-nav__link">
    Gratia/GRACC: The Big Picture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gratia-probes" class="md-nav__link">
    Gratia Probes
  </a>
  
    <nav class="md-nav" aria-label="Gratia Probes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-gratia-probes" class="md-nav__link">
    Running Gratia Probes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gratia-probe-configuration" class="md-nav__link">
    Gratia Probe Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#are-the-gratia-cron-jobs-running" class="md-nav__link">
    Are the Gratia cron jobs running?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#have-you-configured-the-resource-names-correctly" class="md-nav__link">
    Have you configured the resource names correctly?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#did-the-site-name-change" class="md-nav__link">
    Did the site name change?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#is-a-site-reporting-data" class="md-nav__link">
    Is a site reporting data?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondors-gratia-configuration" class="md-nav__link">
    HTCondor's Gratia Configuration
  </a>
  
    <nav class="md-nav" aria-label="HTCondor's Gratia Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#if-you-accidentally-did-not-set-per_job_history_dir-see-above" class="md-nav__link">
    If you accidentally did not set PER_JOB_HISTORY_DIR (see above)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bad-gratia-hostname" class="md-nav__link">
    Bad Gratia hostname
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-important-gratia-files" class="md-nav__link">
    Reference: Important Gratia files
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../schedd-filebeats/" class="md-nav__link">
      Install Transfer Log Filebeats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Release Information
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Release Information" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        <span class="md-nav__icon md-icon"></span>
        Release Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/notes/" class="md-nav__link">
      Release Note Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14-2" type="checkbox" id="nav-14-2">
    
    <label class="md-nav__link" for="nav-14-2">
      3.5 Release Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="3.5 Release Notes" data-md-level="2">
      <label class="md-nav__title" for="nav-14-2">
        <span class="md-nav__icon md-icon"></span>
        3.5 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-28/" class="md-nav__link">
      OSG Release 3.5.28
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-27/" class="md-nav__link">
      OSG Release 3.5.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-26/" class="md-nav__link">
      OSG Release 3.5.26
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-25-2/" class="md-nav__link">
      OSG Release 3.5.25-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-25/" class="md-nav__link">
      OSG Release 3.5.25
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-24/" class="md-nav__link">
      OSG Release 3.5.24
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-23/" class="md-nav__link">
      OSG Release 3.5.23
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-22/" class="md-nav__link">
      OSG Release 3.5.22
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-21-2/" class="md-nav__link">
      OSG Release 3.5.21-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-21/" class="md-nav__link">
      OSG Release 3.5.21
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-20/" class="md-nav__link">
      OSG Release 3.5.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-19/" class="md-nav__link">
      OSG Release 3.5.19
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-18/" class="md-nav__link">
      OSG Release 3.5.18
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-17/" class="md-nav__link">
      OSG Release 3.5.17
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-16/" class="md-nav__link">
      OSG Release 3.5.16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-15-3/" class="md-nav__link">
      OSG Release 3.5.15-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-15-2/" class="md-nav__link">
      OSG Release 3.5.15-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-15/" class="md-nav__link">
      OSG Release 3.5.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-14/" class="md-nav__link">
      OSG Release 3.5.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-13/" class="md-nav__link">
      OSG Release 3.5.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-12/" class="md-nav__link">
      OSG Release 3.5.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-11/" class="md-nav__link">
      OSG Release 3.5.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-10-2/" class="md-nav__link">
      OSG Release 3.5.10-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-10/" class="md-nav__link">
      OSG Release 3.5.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-9/" class="md-nav__link">
      OSG Release 3.5.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8-4/" class="md-nav__link">
      OSG Release 3.5.8-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8-3/" class="md-nav__link">
      OSG Release 3.5.8-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8-2/" class="md-nav__link">
      OSG Release 3.5.8-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-8/" class="md-nav__link">
      OSG Release 3.5.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-7/" class="md-nav__link">
      OSG Release 3.5.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-6/" class="md-nav__link">
      OSG Release 3.5.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-5/" class="md-nav__link">
      OSG Release 3.5.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-4/" class="md-nav__link">
      OSG Release 3.5.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-3/" class="md-nav__link">
      OSG Release 3.5.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-2/" class="md-nav__link">
      OSG Release 3.5.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-1/" class="md-nav__link">
      OSG Release 3.5.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.5/release-3-5-0/" class="md-nav__link">
      OSG Release 3.5.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14-3" type="checkbox" id="nav-14-3">
    
    <label class="md-nav__link" for="nav-14-3">
      3.4 Release Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="3.4 Release Notes" data-md-level="2">
      <label class="md-nav__title" for="nav-14-3">
        <span class="md-nav__icon md-icon"></span>
        3.4 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-57/" class="md-nav__link">
      OSG Release 3.4.57
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-56/" class="md-nav__link">
      OSG Release 3.4.56
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-55-2/" class="md-nav__link">
      OSG Release 3.4.55-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-55/" class="md-nav__link">
      OSG Release 3.4.55
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-54-2/" class="md-nav__link">
      OSG Release 3.4.54-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-54/" class="md-nav__link">
      OSG Release 3.4.54
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-53-2/" class="md-nav__link">
      OSG Release 3.4.53-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-53/" class="md-nav__link">
      OSG Release 3.4.53
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-52/" class="md-nav__link">
      OSG Release 3.4.52
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-51/" class="md-nav__link">
      OSG Release 3.4.51
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-50/" class="md-nav__link">
      OSG Release 3.4.50
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-49-3/" class="md-nav__link">
      OSG Release 3.4.49-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-49-2/" class="md-nav__link">
      OSG Release 3.4.49-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-49/" class="md-nav__link">
      OSG Release 3.4.49
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-48/" class="md-nav__link">
      OSG Release 3.4.48
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-47/" class="md-nav__link">
      OSG Release 3.4.47
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-46/" class="md-nav__link">
      OSG Release 3.4.46
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-45/" class="md-nav__link">
      OSG Release 3.4.45
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-44-2/" class="md-nav__link">
      OSG Release 3.4.44-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-44/" class="md-nav__link">
      OSG Release 3.4.44
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-43/" class="md-nav__link">
      OSG Release 3.4.43
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-42-4/" class="md-nav__link">
      OSG Release 3.4.42-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-42-3/" class="md-nav__link">
      OSG Release 3.4.42-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-42-2/" class="md-nav__link">
      OSG Release 3.4.42-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-42/" class="md-nav__link">
      OSG Release 3.4.42
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-41/" class="md-nav__link">
      OSG Release 3.4.41
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-40/" class="md-nav__link">
      OSG Release 3.4.40
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-39/" class="md-nav__link">
      OSG Release 3.4.39
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-38/" class="md-nav__link">
      OSG Release 3.4.38
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-37/" class="md-nav__link">
      OSG Release 3.4.37
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-36/" class="md-nav__link">
      OSG Release 3.4.36
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-35/" class="md-nav__link">
      OSG Release 3.4.35
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-34/" class="md-nav__link">
      OSG Release 3.4.34
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-33/" class="md-nav__link">
      OSG Release 3.4.33
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-32/" class="md-nav__link">
      OSG Release 3.4.32
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-31-2/" class="md-nav__link">
      OSG Release 3.4.31-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-31/" class="md-nav__link">
      OSG Release 3.4.31
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-30-2/" class="md-nav__link">
      OSG Release 3.4.30-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-30/" class="md-nav__link">
      OSG Release 3.4.30
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-29-2/" class="md-nav__link">
      OSG Release 3.4.29-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-29/" class="md-nav__link">
      OSG Release 3.4.29
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-28-2/" class="md-nav__link">
      OSG Release 3.4.28-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-28/" class="md-nav__link">
      OSG Release 3.4.28
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-27-2/" class="md-nav__link">
      OSG Release 3.4.27-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-27/" class="md-nav__link">
      OSG Release 3.4.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-26-2/" class="md-nav__link">
      OSG Release 3.4.26-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-26/" class="md-nav__link">
      OSG Release 3.4.26
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-25/" class="md-nav__link">
      OSG Release 3.4.25
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-24-2/" class="md-nav__link">
      OSG Release 3.4.24-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-24/" class="md-nav__link">
      OSG Release 3.4.24
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-23/" class="md-nav__link">
      OSG Release 3.4.23
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-22-2/" class="md-nav__link">
      OSG Release 3.4.22-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-22/" class="md-nav__link">
      OSG Release 3.4.22
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-21/" class="md-nav__link">
      OSG Release 3.4.21
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-20/" class="md-nav__link">
      OSG Release 3.4.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-19/" class="md-nav__link">
      OSG Release 3.4.19
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-18-2/" class="md-nav__link">
      OSG Release 3.4.18-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-18/" class="md-nav__link">
      OSG Release 3.4.18
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17-3/" class="md-nav__link">
      OSG Release 3.4.17-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17-2/" class="md-nav__link">
      OSG Release 3.4.17-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17/" class="md-nav__link">
      OSG Release 3.4.17
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-16-2/" class="md-nav__link">
      OSG Release 3.4.16-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-16/" class="md-nav__link">
      OSG Release 3.4.16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-15/" class="md-nav__link">
      OSG Release 3.4.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14-2/" class="md-nav__link">
      OSG Release 3.4.14-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14/" class="md-nav__link">
      OSG Release 3.4.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-13/" class="md-nav__link">
      OSG Release 3.4.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-3/" class="md-nav__link">
      OSG Release 3.4.12-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-2/" class="md-nav__link">
      OSG Release 3.4.12-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12/" class="md-nav__link">
      OSG Release 3.4.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-11/" class="md-nav__link">
      OSG Release 3.4.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-10/" class="md-nav__link">
      OSG Release 3.4.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9-2/" class="md-nav__link">
      OSG Release 3.4.9-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9/" class="md-nav__link">
      OSG Release 3.4.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-8/" class="md-nav__link">
      OSG Release 3.4.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-7/" class="md-nav__link">
      OSG Release 3.4.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6-2/" class="md-nav__link">
      OSG Release 3.4.6-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6/" class="md-nav__link">
      OSG Release 3.4.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-4/" class="md-nav__link">
      OSG Release 3.4.5-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-3/" class="md-nav__link">
      OSG Release 3.4.5-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-2/" class="md-nav__link">
      OSG Release 3.4.5-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5/" class="md-nav__link">
      OSG Release 3.4.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-3/" class="md-nav__link">
      OSG Release 3.4.4-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-2/" class="md-nav__link">
      OSG Release 3.4.4-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4/" class="md-nav__link">
      OSG Release 3.4.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-3/" class="md-nav__link">
      OSG Release 3.4.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2-2/" class="md-nav__link">
      OSG Release 3.4.2-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2/" class="md-nav__link">
      OSG Release 3.4.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1-2/" class="md-nav__link">
      OSG Release 3.4.1-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1/" class="md-nav__link">
      OSG Release 3.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0-2/" class="md-nav__link">
      OSG Release 3.4.0-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0/" class="md-nav__link">
      OSG Release 3.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release_series/" class="md-nav__link">
      OSG Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/supported_platforms/" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/yum-basics/" class="md-nav__link">
      Yum Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/signing/" class="md-nav__link">
      RPM Signing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Deprecated
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deprecated" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon"></span>
        Deprecated
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gsissh/" class="md-nav__link">
      Install GSI-enabled SSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../network-performance-toolkit/" class="md-nav__link">
      Install the Network Performance Toolkit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv/" class="md-nav__link">
      Install RSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/advanced-rsv-configuration/" class="md-nav__link">
      Advanced RSV Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/rsv-control/" class="md-nav__link">
      Manage RSV via rsv-control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv-gwms-tester/" class="md-nav__link">
      RSV GlideinWMS Tester
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../common/help/" class="md-nav__link">
      Get Help
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gratiagracc-the-big-picture" class="md-nav__link">
    Gratia/GRACC: The Big Picture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gratia-probes" class="md-nav__link">
    Gratia Probes
  </a>
  
    <nav class="md-nav" aria-label="Gratia Probes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-gratia-probes" class="md-nav__link">
    Running Gratia Probes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gratia-probe-configuration" class="md-nav__link">
    Gratia Probe Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#are-the-gratia-cron-jobs-running" class="md-nav__link">
    Are the Gratia cron jobs running?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#have-you-configured-the-resource-names-correctly" class="md-nav__link">
    Have you configured the resource names correctly?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#did-the-site-name-change" class="md-nav__link">
    Did the site name change?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#is-a-site-reporting-data" class="md-nav__link">
    Is a site reporting data?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondors-gratia-configuration" class="md-nav__link">
    HTCondor's Gratia Configuration
  </a>
  
    <nav class="md-nav" aria-label="HTCondor's Gratia Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#if-you-accidentally-did-not-set-per_job_history_dir-see-above" class="md-nav__link">
    If you accidentally did not set PER_JOB_HISTORY_DIR (see above)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bad-gratia-hostname" class="md-nav__link">
    Bad Gratia hostname
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-important-gratia-files" class="md-nav__link">
    Reference: Important Gratia files
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/docs/edit/master/docs/other/troubleshooting-gratia.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="troubleshooting-gratia-accounting">Troubleshooting Gratia Accounting<a class="headerlink" href="#troubleshooting-gratia-accounting" title="Permanent link">&para;</a></h1>
<p>This document will help you troubleshoot problems with the Gratia Accounting, particularly with problems in collecting and reporting accounting information to the central OSG accounting service.</p>
<h2 id="gratiagracc-the-big-picture">Gratia/GRACC: The Big Picture<a class="headerlink" href="#gratiagracc-the-big-picture" title="Permanent link">&para;</a></h2>
<p>Gratia is software used in OSG to gather accounting information. The information is collected from individual resources at a site, such as a Compute Entrypoint or a a submission host. The program that collects the data is called a "Gratia probe". The information is transferred to a GRACC server. Most sites will choose to send the accounting data to the central OSG Gratia server, but you can also use a Gratia server at your site (which can send forward the data to the central OSG Gratia server). Here is a diagram:</p>
<div class="admonition note">
<p class="admonition-title">Difference between Gratia and GRACC</p>
<p>Gratia is the legacy name of the OSG Accounting system.  GRACC is the new name of the server and hosted components of the accounting system.  When we refer to Gratia, we mean either the data or the probes on the resources.  If we mention GRACC, we are referring to the hosted components that the OSG maintains.</p>
</div>
<p><img alt="Gratia Basics" src="../../img/gratia-overview.png" /></p>
<p>These are the definitions of the major elements in the above figure.</p>
<ul>
<li><strong>Gratia probe</strong>: A piece of software that collects accounting data from the computer on which it's running, and transmits it to a Gratia server.</li>
<li><strong>GRACC server</strong>: A server that collects Gratia accounting data from one or more sites and can share it with users via a web page.  The GRACC server is hosted by the OSG.</li>
<li><strong>Reporter</strong>: A web service running on the GRACC server. Users can connect to the reporter via a web browser to explore the Gratia data.</li>
<li><strong>Collector</strong>: A web service running on the GRACC server that collects data from one or more Gratia probes. Users do not directly interact with the collector.</li>
</ul>
<p>You can see the OSG's GRACC website at <a href="https://gracc.opensciencegrid.org">https://gracc.opensciencegrid.org</a>.</p>
<p>You can see a fancier version of the Gratia data at <a href="https://display.opensciencegrid.org/">https://display.opensciencegrid.org/</a>. This is <strong>not</strong> running a Gratia collector, but is a separate service.</p>
<h2 id="gratia-probes">Gratia Probes<a class="headerlink" href="#gratia-probes" title="Permanent link">&para;</a></h2>
<p>Gratia Probes are periodically run as cron jobs, but different probes will run at different intervals. The cron jobs will always run and you should not remove them. You can find them in <code>/etc/cron.d</code>.</p>
<p>However, the cron jobs will only do anything if you have enabled them. You enable them via an init script. For example, to enable them:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> service gratia-probes-cron start
<span class="go">Enabling gratia probes cron:                               [  OK  ]</span>
</code></pre></div>

<p>To disable them:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> service gratia-probes-cron stop
<span class="go">Disabling gratia probes cron:                               [  OK  ]</span>
</code></pre></div>

<p>You also need to enable individual probes, usually via <code>osg-configure</code>.  Documentation on using <code>osg-configure</code> with Gratia <a href="../configuration-with-osg-configure/#gratia">documented elsewhere</a>.</p>
<h3 id="running-gratia-probes">Running Gratia Probes<a class="headerlink" href="#running-gratia-probes" title="Permanent link">&para;</a></h3>
<p>When the cron jobs are enabled and run, they go through the following process, with minor changes between different Gratia probes:</p>
<ol>
<li>The probe is invoked. It reads its configuration from <code>/etc/gratia/PROBE-NAME/ProbeConfig</code>.</li>
<li>It collects the accounting information from the underlying system. For example, the Condor probe will read it from the <code>PER_JOB_HISTORY_DIR</code>, which is usually <code>/var/lib/gratia/data</code>.</li>
<li>It transforms the data into Gratia records and saves them into <code>/var/lib/gratia/tmp/gratiafiles/</code></li>
<li>When there are sufficient Gratia records, or when sufficient time has passed, it uploads sets of records in batches to the GRACC server, then removes them from the <code>gratiafiles</code> directory.</li>
<li>All progress is logged to <code>/var/log/gratia</code>.</li>
<li>If there are failures in uploading the files to the GRACC server<ol>
<li>Files are not removed from <code>gratiafiles</code> until they are successfully uploaded.</li>
<li>Errors are logged to log files in <code>/var/log/gratia</code>.</li>
<li>The uploads will be tried again later.</li>
</ol>
</li>
</ol>
<h3 id="gratia-probe-configuration">Gratia Probe Configuration<a class="headerlink" href="#gratia-probe-configuration" title="Permanent link">&para;</a></h3>
<p>In normal cases, <code>osg-configure</code> does the editing of the probe configuration files, at least on the CE. The configuration is found in <code>/etc/osg/config.d/30-gratia.ini</code> and <a href="../configuration-with-osg-configure/#gratia">documented elsewhere</a>.</p>
<p>If there are problems or special configuration, you might need to edit the Gratia configuration files yourself. Each probe has a separate configuration file found in <code>/etc/gratia/PROBE-NAME/ProbeConfig</code>.</p>
<p>The ProbeConfig files have many details. A few options that you might need to edit are shown before. This is <strong>not</strong> a complete file, but only shows a subset of the options.</p>
<div class="codehilite"><pre><span></span><code>&lt;ProbeConfiguration 

    CollectorHost=&quot;gratia-osg-itb.opensciencegrid.org:80&quot;
    SSLHost=&quot;gratia-osg-itb.opensciencegrid.org:80&quot;
    SSLRegistrationHost=&quot;gratia-osg-itb.opensciencegrid.org:80&quot;

    ProbeName=&quot;condor:fermicloud084.fnal.gov&quot;
    SiteName=&quot;WISC_OSG_EDU&quot;
    EnableProbe=&quot;1&quot;
/&gt;
</code></pre></div>

<p>The options you see here are:</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">CollectorHost</td>
<td align="left">The GRACC server this probe reports to</td>
</tr>
<tr>
<td align="left">SSLHost</td>
<td align="left">The GRACC server this probe reports to</td>
</tr>
<tr>
<td align="left">SSLRegistrationHost</td>
<td align="left">The GRACC server this probe reports to</td>
</tr>
<tr>
<td align="left">ProbeName</td>
<td align="left">The unique name for this probe. Note that it includes the probe type and the host name</td>
</tr>
<tr>
<td align="left">SiteName</td>
<td align="left">The name of your site, as registered in OIM. If your site must be registered in OIM</td>
</tr>
<tr>
<td align="left">EnableProbe</td>
<td align="left">The probe will only run if this is "1"</td>
</tr>
</tbody>
</table>
<p>Again, there are many more options in this file. Most of the time you won't need to touch them.</p>
<h2 id="are-the-gratia-cron-jobs-running">Are the Gratia cron jobs running?<a class="headerlink" href="#are-the-gratia-cron-jobs-running" title="Permanent link">&para;</a></h2>
<p>You should make sure the Gratia cron jobs are running. The simplest way is with the <code>service</code> command:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> /sbin/service gratia-probes-cron status
<span class="go">gratia probes cron is enabled.</span>
</code></pre></div>

<p>If it is not enabled, enable it as described above.</p>
<p>A future release of Gratia will provide status on each of the individual probes, but right now this only ensures that the basic cron job is running. In the meantime, you can check if the individual Gratia probes are enabled. To do this, look at the <code>EnableProbe</code> option in the <code>ProbeConfig</code> file, as described above. A quick command to do this is shown here. Note that the Condor and GridFTP Transfer probes are enabled while the glexec probe is disabled:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">cd</span> /etc/gratia
<span class="gp">root@host #</span> grep -r EnableProbe *
<span class="go">condor/ProbeConfig:    EnableProbe=&quot;1&quot;</span>
<span class="go">glexec/ProbeConfig:    EnableProbe=&quot;0&quot;</span>
<span class="go">gridftp-transfer/ProbeConfig:    EnableProbe=&quot;1&quot;</span>
</code></pre></div>

<p>If you see no log files in <code>/var/log/gratia</code> you may have an error in the probe configuration file. Manually run the test for your probe (check <code>/etc/cron.d/gratia-probe-condor.cron</code>), e.g. <code>/usr/share/gratia/common/cron_check  /etc/gratia/condor/ProbeConfig</code>. If there is an error you may get a suggestion on where it is, e.g.:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> /usr/share/gratia/common/cron_check  /etc/gratia/condor/ProbeConfig
<span class="go">Parse error in /etc/gratia/condor/ProbeConfig: not well-formed (invalid token): line 21, column 4</span>
</code></pre></div>

<p>Correct the error and restart gratia.</p>
<h2 id="have-you-configured-the-resource-names-correctly">Have you configured the resource names correctly?<a class="headerlink" href="#have-you-configured-the-resource-names-correctly" title="Permanent link">&para;</a></h2>
<p>Do the names of your resources match the names in <a href="https://github.com/opensciencegrid/topology/tree/master/topology">OIM</a>?
Gratia retrieves the resource name from the <code>Site Information</code> section of the <code>/etc/osg/config.d/40-siteinfo.ini</code></p>
<div class="codehilite"><pre><span></span><code>;===================================================================
;                       Site Information
;===================================================================

[Site Information]
; The group option indicates the group that the OSG site should be listed in,
; for production sites this should be OSG, for vtb or itb testing it should be
; OSG-ITB
; 
; YOU WILL NEED TO CHANGE THIS
group = OSG

; The host_name setting should give the host name of the CE  that is being 
; configured, this setting must be a valid dns name that resolves
; 
; YOU WILL NEED TO CHANGE THIS
host_name = tusker-gw1.unl.edu

; The resource setting should be set to the same value as used in the OIM 
; registration at the goc 
; 
; YOU WILL NEED TO CHANGE THIS
resource = Tusker-CE1

; The resource_group setting should be set to the same value as used in the OIM 
; registration at the goc 
; 
; YOU WILL NEED TO CHANGE THIS
resource_group = Tusker
</code></pre></div>

<p>Do those names match the names that you registered with OIM? If not, edit the names, and rerun "osg-configure -c".</p>
<h2 id="did-the-site-name-change">Did the site name change?<a class="headerlink" href="#did-the-site-name-change" title="Permanent link">&para;</a></h2>
<p>Was the site previously reporting data, but the site name (not host name, but site name) changed? When the site name changes, you need to ask the GRACC operations team to update the name of your site at the GRACC collector. To do this:</p>
<ol>
<li>Open a <a href="https://support.opensciencegrid.org/helpdesk/tickets/new">support ticket</a></li>
<li>Select "Software or Service"</li>
<li>Select "GRACC Operations"</li>
<li>Type a friendly email that asks the GRACC team to change your site name at the collector. Make sure to tell them the old name and the new name.  Below is an example email:<div class="codehilite"><pre><span></span><code>Hello GRACC Team,

Please change the site name of my site from &lt;Insert Old Name&gt; to &lt;Insert New Name&gt;.

Thanks, ...
</code></pre></div>

</li>
</ol>
<h2 id="is-a-site-reporting-data">Is a site reporting data?<a class="headerlink" href="#is-a-site-reporting-data" title="Permanent link">&para;</a></h2>
<p>You can see if the OSG GRACC Server is getting data from a site by going to <a href="https://gracc.opensciencegrid.org/dashboard/db/pilot-jobs-summary?orgId=1">GRACC</a>:</p>
<ol>
<li>Specify the site name in Facility</li>
</ol>
<h2 id="htcondors-gratia-configuration">HTCondor's Gratia Configuration<a class="headerlink" href="#htcondors-gratia-configuration" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only applicable to HTCondor batch sites, not SLURM, PBS, SGE or LSF sites</p>
</div>
<p>Condor must be configured to put information about each job into a special directory.  Gratia will read and remove the files in order to collect the accounting information.</p>
<p>The configuration variable is called <code>PER_JOB_HISTORY_DIR</code>. If you install the OSG RPM for Condor, the Gratia probe will extend its configuration by adding a file to <code>/etc/condor/config.d</code>, and will set this variable to <code>/var/lib/gratia/data</code>. If you are using a different installation method, you may need to set the variable yourself. You can check if it's set by using <code>condor_config_val</code>, like this:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> condor_config_val -v PER_JOB_HISTORY_DIR
<span class="go">PER_JOB_HISTORY_DIR: /var/lib/gratia/data</span>
<span class="go">    Defined in &#39;/etc/condor/config.d/99_gratia.conf&#39;, line 5.</span>
</code></pre></div>

<p>If you set this value, you need to restart condor:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> condor_restart
<span class="go">Sent &quot;Restart&quot; command to local master</span>
</code></pre></div>

<p>Unlike many Condor settings, a <strong>condor_reconfig</strong> is not sufficient - you must restart!</p>
<h3 id="if-you-accidentally-did-not-set-per_job_history_dir-see-above">If you accidentally did not set <code>PER_JOB_HISTORY_DIR</code> (see above)<a class="headerlink" href="#if-you-accidentally-did-not-set-per_job_history_dir-see-above" title="Permanent link">&para;</a></h3>
<p>The HTCondor Gratia probe will not publish accounting information about jobs without <code>PER_JOB_HISTORY_DIR</code>. You can have Gratia read the Condor history file and publish data that way. If you know the time period of the missing data, you should specify a start and end times. This reduces the load on the Gratia collector. To do so:</p>
<p><strong>Preferred method using start and end times</strong></p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> /usr/share/gratia/condor/condor_meter --history --start-time<span class="o">=</span><span class="s2">&quot;2014-06-01&quot;</span> --end-time<span class="o">=</span><span class="s2">&quot;2014-06-02&quot;</span> --verbose
</span><span class="go">2014-06-03 10:00:36 CDT Gratia: RUNNING condor_meter MANUALLY using HTCondor history from 2014-06-01 to 2014-06-02</span>
<span class="go">2014-06-03 10:00:36 CDT Gratia: RUNNING: condor_history -l -constraint &#39;((JobCurrentStartDate &gt; 1401598800) &amp;&amp; (JobCurrentStartDate &lt; 1401685200))&#39;</span>
<span class="go">2014-06-03 10:00:49 CDT Gratia: condor_meter --history: Usage records submitted: 399</span>
<span class="go">2014-06-03 10:00:49 CDT Gratia: condor_meter --history: Usage records found: 400</span>
<span class="go">2014-06-03 10:00:49 CDT Gratia: RUNNING condor_meter MANUALLY Finished</span>
</code></pre></div>

<p><strong>or if you need to go back to the beginning of time</strong></p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="gp">root@host #</span> /usr/share/gratia/condor/condor_meter --history --verbose
</span><span class="go">2014-06-03 10:06:19 CDT Gratia: RUNNING condor_meter MANUALLY using all HTCondor history</span>
<span class="go">2014-06-03 10:06:19 CDT Gratia: RUNNING: condor_history -l</span>
<span class="go">2014-06-03 10:11:38 CDT Gratia: condor_meter --history: Usage records submitted: 13026</span>
<span class="go">2014-06-03 10:11:38 CDT Gratia: condor_meter --history: Usage records found: 13027</span>
<span class="go">2014-06-03 10:11:38 CDT Gratia: RUNNING condor_meter MANUALLY Finished</span>
</code></pre></div>

<p>Not much is printed to the screen, but you can see progress in the Gratia log file:</p>
<div class="codehilite"><pre><span></span><code>13:35:28 CDT Gratia: Initializing Gratia with /etc/gratia/condor/ProbeConfig
13:35:28 CDT Gratia: Creating a ProbeDetails record 2012-04-04T18:35:28Z
13:35:28 CDT Gratia: ***********************************************************
13:35:28 CDT Gratia: OK - Handshake added to bundle (1/100)
13:35:28 CDT Gratia: ***********************************************************
13:35:28 CDT Gratia: List of backup directories: [u&#39;/var/lib/gratia/tmp&#39;]
13:35:28 CDT Gratia: Reprocessing response: OK - Reprocessing 0 record(s) uploaded, 0 bundled, 0 failed
13:35:28 CDT Gratia: After reprocessing: 0 in outbox 0 in staged outbox 0 tar files
13:35:28 CDT Gratia: Creating a UsageRecord 2012-04-04T18:35:28Z
...
13:35:29 CDT Gratia: Processing bundle file: 
13:35:29 CDT Gratia: Processing bundle file: /var/lib/gratia/tmp/gratiafiles/
    subdir.condor_fermicloud084.fnal.gov_gratia-osg-itb.opensciencegrid.org_80/
    outbox/r.18425.condor_fermicloud084.fnal.gov_gratia-osg-itb.opensciencegrid.org_80.gratia.xml__BSuXo18428
...
13:35:29 CDT Gratia: ***********************************************************
13:35:29 CDT Gratia: Removing log files older than 31 days from /var/log/gratia
13:35:29 CDT Gratia: /var/log/gratia uses 0.035% and there is 73% free
13:35:29 CDT Gratia: Removing incomplete data files older than 31 days from /var/lib/gratia/data/
13:35:29 CDT Gratia: /var/lib/gratia/data uses 0% and there is 73% free
13:35:29 CDT Gratia: End of execution summary: new records sent successfully: 37
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Condor rotates history files, so you can only report what Condor has kept. Controlling the Condor history is documented in the Condor manual. In particular, see the options for <a href="https://research.cs.wisc.edu/htcondor/manual/v8.6/3_5Configuration_Macros.html#21780">MAX_HISTORY_LOG</a> and <a href="https://research.cs.wisc.edu/htcondor/manual/v8.6/3_5Configuration_Macros.html#21785">MAX_HISTORY_ROTATIONS</a>.</p>
</div>
<h3 id="bad-gratia-hostname">Bad Gratia hostname<a class="headerlink" href="#bad-gratia-hostname" title="Permanent link">&para;</a></h3>
<p>This is an example problem where the configuration was bad: there was an incorrect hostname for the Gratia server. The problem is clearly visible in the Gratia log file, which is located in <code>/var/log/gratia/</code>. There is one log file per day, labeled by the date:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">cd</span> /var/log/gratia/
<span class="gp">root@host #</span> cat <span class="m">2012</span>-04-03.log
</code></pre></div>

<p>You can see that Gratia is using the correct configuration file:</p>
<div class="codehilite"><pre><span></span><code><span class="go">15:06:55 CDT Gratia: Using config file: /etc/gratia/condor/ProbeConfig</span>
</code></pre></div>

<p>Here Gratia is removing a file from the Condor PER_JOB_HISTORY_DIR and creating a Gratia accounting record for it</p>
<div class="codehilite"><pre><span></span><code><span class="go">15:06:55 CDT Gratia: Creating a UsageRecord 2012-04-03T20:06:55Z</span>
<span class="go">15:06:55 CDT Gratia: Registering transient input file: /var/lib/gratia/data/history.37.0</span>
<span class="go">15:06:55 CDT Gratia: ***********************************************************</span>
<span class="hll"><span class="go">15:06:55 CDT Gratia: Saved record to /var/lib/gratia/tmp/gratiafiles/</span>
</span><span class="go">    subdir.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80/</span>
<span class="go">    outbox/r.30604.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80.gratia.xml__wfIgi30606</span>
<span class="hll"><span class="go">15:06:55 CDT Gratia: Deleting transient input file: /var/lib/gratia/data/history.37.0</span>
</span></code></pre></div>

<p>Later, Gratia failed to connect to the server due to a bad hostname</p>
<div class="codehilite"><pre><span></span><code><span class="hll"><span class="go">15:06:55 CDT Gratia: Failed to send xml to web service due to an error of type &quot;socket.gaierror&quot;: (-2, &#39;Name or service not known&#39;)</span>
</span><span class="go">...</span>
<span class="go">15:06:55 CDT Gratia: Response indicates failure, the following files will not be deleted:</span>
<span class="go">15:06:55 CDT Gratia:    /var/lib/gratia/tmp/gratiafiles/</span>
<span class="go">    subdir.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80/</span>
<span class="go">    outbox/r.30604.condor_fermicloud084.fnal.gov_ggratia-osg-itb.opensciencegrid.org_80.gratia.xml__wfIgi30606</span>
</code></pre></div>

<p>If you accidentally had a bad Gratia hostname, you probably want to recover your Gratia data. </p>
<p>This can be done, though it's not simple. There are a few things you need to do. But first, you need to understand exactly where Gratia stores files.</p>
<p>When a Gratia extracts accounting information, it creates one file per record and stores it in a directory. The directory is a long name that contains the type of the probe (such as <code>condor</code>), the name of the host you're running on, and the name of the GRACC host you're sending the information to. For simplicity, lets call that name <code>&lt;PROBE-RECORDS&gt;</code>, but you'll see what it really looks like below. Within this directory, you'll see some subdirectories:</p>
<table>
<thead>
<tr>
<th align="left">Directory</th>
<th align="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">/var/lib/gratia/tmp/grataifiles/<code>&lt;PROBE-RECORDS&gt;</code>/outbox</td>
<td align="left">The usual location for the accounting records</td>
</tr>
<tr>
<td align="left">/var/lib/gratia/tmp/grataifiles/<code>&lt;PROBE-RECORDS&gt;</code>/staged/store</td>
<td align="left">An overflow location when there are problems</td>
</tr>
</tbody>
</table>
<p>When you recover old records, you need to:</p>
<ol>
<li>Move files from the outbox of the incorrect <em>probe-records</em> directory into the outbox of the correctly named <em>probe-records</em> directory.</li>
<li>Move tarred and compressed files from the staged/store of the incorrect <em>probe-records</em> directory into the staged/store of the correctly named <em>probe-records</em> directory. Then you uncompress them and remove the compressed version.</li>
</ol>
<p>In the examples below, the hostname for gratia was "accidentally" spelled backwards. Instead of <code>gratia-osg-itb.opensciencegrid.org</code>, it was <code>aitarg-osg-itb.opensciencegrid.org</code>.</p>
<ol>
<li>
<p>First you need to fix the hostname. For a CE, you can edit <code>/etc/osg/config.d/30-gratia.ini</code> and rerun <code>osg-configure -c</code>. In other installations, you have to edit the appropriate <code>ProbeConfig</code> file.</p>
</li>
<li>
<p>Next, submit a job via to your batch system, then run the appropriate Gratia probe (or wait for it to run via cron). This will create the properly named directories on your disk. For example:</p>
<p>As a user: </p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> globus-job-run fermicloud084.fnal.gov/jobmanager-condor /bin/hostname
</code></pre></div>

<p>As root (adjust for your batch system): </p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> /share/gratia/condor/condor<span class="se">\_</span>meter
</code></pre></div>

</li>
<li>
<p>Find the Gratia records that can be easily uploaded. They are located in a a directory with an unwieldly name that
includes your hostname and the incorrect name of the Gratia host. You can see the directory name in the Gratia log: the
misspelled name is between angled brackets and capital letters below, but <em>it will be different on your computer</em>.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $</span> less /var/log/gratia/2012-04-06
<span class="go">...</span>
<span class="go">16:04:29 CDT Gratia: Response indicates failure, the following files will not be deleted:</span>
<span class="go">16:04:29 CDT Gratia:    /var/lib/gratia/tmp/gratiafiles/</span>
<span class="go">    subdir.condor_fermicloud084.fnal.gov_&lt;AITARG&gt;-osg-itb.opensciencegrid.org_80/</span>
<span class="go">    outbox/r.916.condor_fermicloud084.fnal.gov_aitarg-osg-itb.opensciencegrid.org_80.gratia.xml__JDlHbNb918</span>
</code></pre></div>

<p>(The filename was wrapped for legibility.)</p>
<p>You can simply copy these to the correct directory. Wait for the Gratia cron job to run, or force it to run.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host #</span> <span class="nb">cd</span> /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_&lt;AITARG&gt;-osg-itb.opensciencegrid.org_80/outbox/.
<span class="gp">root@host #</span> mv * /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_gratia-osg-itb.opensciencegrid.org_80/outbox/.
</code></pre></div>

</li>
<li>
<p>If this has been a persistent problem, you might have many records. After a while, they are put into a compressed files in another directory. You can move those files, then uncompress them. This is a long name: note that the path ends in "staged/store" instead of "outbox" as above:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">#</span> Find the old files
<span class="gp">root@host #</span> <span class="nb">cd</span> /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_&lt;AITARG&gt;-osg-itb.opensciencegrid.org_80/staged/store

<span class="gp">#</span> Move them to the correct directory
<span class="gp">root@host #</span> mv tz* /var/lib/gratia/tmp/gratiafiles/subdir.condor_fermicloud084.fnal.gov_gratia-osg-itb.opensciencegrid.org_80/outbox/.
<span class="gp">root@host #</span> <span class="nb">cd</span> !$

<span class="gp">#</span> For each tz file:
<span class="gp">root@host #</span> tar xf tz.1223.... <span class="o">[</span>name shortened <span class="k">for</span> legibility<span class="o">]</span>
<span class="gp">root@host #</span> rm tz.1223....
</code></pre></div>

<p>When you've done this, you can re-run the Gratia probe by hand, or wait for it to run via cron.</p>
</li>
</ol>
<h2 id="reference-important-gratia-files">Reference: Important Gratia files<a class="headerlink" href="#reference-important-gratia-files" title="Permanent link">&para;</a></h2>
<p>If you need to look for more data, you can look at log files for the various services on your CE.</p>
<table>
<thead>
<tr>
<th align="left">File</th>
<th align="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>/var/log/gratia/&lt;DATE&gt;.log</code></td>
<td align="left">Log file that records information about processing and uploading of Gratia accounting data</td>
</tr>
<tr>
<td align="left"><code>/var/log/gratia/gridftpTransfer.log</code></td>
<td align="left">Log file specific to the Gratia GridFTP probe</td>
</tr>
<tr>
<td align="left"><code>/var/lib/gratia/data</code></td>
<td align="left">Location for Condor and PBS job data before being processed by Gratia<br>Condor's <code>PER_JOB_HISTORY_DIR</code> should be set to this location</td>
</tr>
<tr>
<td align="left"><code>/var/lib/gratia/tmp/gratiafiles</code></td>
<td align="left">Location for temporary Gratia data as it is being processed, usually empty.<br>If you have files that are more than 30 minutes old in this directory, there may be a problem</td>
</tr>
<tr>
<td align="left"><code>/etc/gratia/&lt;PROBE-NAME&gt;/ProbeConfig</code></td>
<td align="left">Configuration for Gratia probes, one per probe type</br>Normally you don't need to edit this</td>
</tr>
</tbody>
</table>
<p>Not all RPMs will be on all hosts.  Instead, only the <code>gratia-probe-common</code> and the one RPM specific to that host will be installed. The most common RPMs you will see are:</p>
<table>
<thead>
<tr>
<th align="left">RPM</th>
<th align="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>gratia-probe-common</code></td>
<td align="left">Code shared between all Graita probes</td>
</tr>
<tr>
<td align="left"><code>gratia-probe-condor</code></td>
<td align="left">The probe that tracks Condor usage</td>
</tr>
<tr>
<td align="left"><code>gratia-probe-slurm</code></td>
<td align="left">The probe that tracks SLURM usage</td>
</tr>
<tr>
<td align="left"><code>gratia-probe-pbs-lsf</code></td>
<td align="left">The probe that tracks PBS and/or LSF usage</td>
</tr>
<tr>
<td align="left"><code>gratia-probe-gridftp-transfer</code></td>
<td align="left">The probe that tracks transfers done with GridFTP</td>
</tr>
</tbody>
</table>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../install-cvmfs-stratum1/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Install a CVMFS Stratum 1
              </div>
            </div>
          </a>
        
        
          <a href="../schedd-filebeats/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Install Transfer Log Filebeats
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        This material is based upon work supported by the
        <a href="https://nsf.gov">National Science Foundation</a>
        under Grant Nos.
        <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1148698">1148698</a>
        and
        <a href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1836650">1836650</a>
        . Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>

      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>